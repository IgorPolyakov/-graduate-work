\subsection {Программная платформа и язык программирования}
Для решения поставленной задачи необходимо использовать функциональную, эффективную и удобную платформу для разработки. В качестве такой платформы была выбрана среда разработки Qt Creator.
\input{qt_doc}
\subsubsection {Использование системы контроля версий}
\input{git}
\subsection{Структурно функциональная схема программного обеспечения}%, в состав которого входит разрабатываемый программный модуль с четкой формулировкой решаемых им задач}

Программное обеспечение состоит из нескольких блоков, представленных на рисунке~\ref{pic:shema_PO}.

\begin{itemize}
\item ПО для оценки деформации ``Deformation Analysis'';
\item форма для ввода входных параметров ``strain\_calculate.qml'';
\item ПО для расчёта деформации поверхности твёрдого тела ``lucas\_kanade''.
\end{itemize}

Программное обеспечение ``Deformation Analysis'' является средством для запуска отдельных программных модулей, в том числе и для расчёта деформации твёрдого тела. Также может отрисовывать входные данные (цифровые изображения), выходные данные (поля смещений, компоненты деформации). 

Форма ``strain\_calculate.qml'' написанная на QML, является прослойкой между имеющимся ПО для оценки деформации и ПО разрабатываемым в рамках выпускной квалификационной работы. Текст формы находится в приложении~\ref{form_qml}. Под QML подразумевалось (Qt Meta-Object Language) — декларативный язык программирования, основанный на JavaScript, предназначенный для дизайна приложений, делающих основной упор на пользовательский интерфейс. Является частью Qt Quick, среды разработки пользовательского интерфейса, распространяемой вместе с Qt.

\begin{figure}[h!]
\center{\includegraphics[width=0.8\linewidth]{images/shema_PO.pdf}}
\caption{Структура разработанного ПО}
\label{pic:shema_PO}
\end{figure}

Структурно--функциональная схема (рисунок~\ref{pic:idef0}) соответствующая стандарту IDEF0. На схеме обозначены входящие в него функциональных элементы. %В связях надлежит доступными средствами выделить различные виды информационных потоков: символьные и кодовые массивы, бинарные сигналы индикации и управления, событийную информацию.

\begin{figure}[h!]
\center{\includegraphics[width=0.8\linewidth]{images/idef0.pdf}}
\caption{Функциональная схема}
\label{pic:idef0}
\end{figure}

\subsection{Сведения о платформе реализации с указанием основных функций операционной системы, необходимых для работы модуля}
\input{technical_attributes}

\subsection {Выбор формата выходных файлов}
Для вывода результата был выбран формат файла HDF5. 

Hierarchical Data Format, HDF (Иерархический формат данных) — название формата файлов, разработанного для хранения большого количества цифровой информации.

HDF5 — современная версия формата содержит иерархию из двух основных типов объектов:
HDF-Structure-Example
\begin{enumerate}
\item Datasets — наборы данных, многомерные массивы объектов одного типа
\item Groups — группы, являются контейнерами для наборов данных и других групп
\end{enumerate}
    
Содержимое файлов HDF5 организовано подобно иерархической файловой системе, и для доступа к данным применяются пути, сходные с POSIX-синтаксисом, например, /path/to/resource. Метаданные хранятся в виде набора именованных атрибутов объектов~\cite{hdf5}.

\begin{figure}
\centering
\includegraphics[width=0.7\linewidth]{images/structHDF5.pdf}
\caption{Структура HDF5 файла}
\label{fig:structHDF5}
\end{figure}

Структура сохранения результатов работы представлена на рисунке~\ref{fig:structHDF5}

Под блоком исходные обрабатываемые изображения подразумевается входная пара изображений (левая, правая) в форматах png, bmp, jpg, tiff и др. В выходном файле они представлены двумя слоями: ``left'' и ``right''. Они необходимы для удобства просмотра в программе Defomation-Analysis. Программа Defomation-Analysis умеет выводить отдельные слои и накладывать их друг на друга.

Блок векторное поле смешений является бинарным файлом, формата ``vf''. Слой содержит информацию о размерах исходного изображения, координаты векторов смещений и векторы в формате double (формула~\ref{eq:lucas}).

Блок поля деформации также является бинарным файлом и содержит слои деформации:
\begin{enumerate}
\item $\varepsilon_{xx}$ - продольная (формула~\ref{eq:e_xx});
\item $\varepsilon_{yy}$ - поперечная (формула~\ref{eq:e_yy});
\item $\varepsilon_{xy}$ - сдвиговая (формула~\ref{eq:e_xy});
\item $w_{i}$ - поворотная (формула~\ref{eq:w_z});
\item $\gamma_z$ - интенсивность деформации сдвига (формула~\ref{eq:gamma_i}).
\end{enumerate}

\subsection{Программная документация}
Для облегчения написания документации к текстам программ, воспользуемся генератором документации. Так как у автора работы есть опыт использования системы Doxygen, то она и будет использована.

На вход такого генератора поступает специальным образом комментированный текст программы, а иногда и другие компоненты программы, а на выходе создаётся готовая документация для распространения и использования.

Используемая система Doxygen как раз и выполняет эту задачу: она позволяет генерировать на основе исходного кода, содержащего комментарии специального вида, красивую и удобную документацию, содержащую в себе ссылки, диаграммы классов, вызовов и т.п. в различных форматах: hTML, LaTeX, CHM, RTF, PostScript, PDF, man-страницы~\cite{doxygen}.

Документация собранная системой Doxygen представления в приложении~\ref{doxygen}.
\subsection{Основные алгоритмы работы, программных модулей}
Основной алгоритм работы представлен на рисунке~\ref{fig:lucas_kanade_alg}. Для удобства, крупное блоки вынесены в отдельные блок-схемы и представлены на рисунках~\ref{fig:calc_pyr} и~\ref{fig:calc_opt_flow}.
\begin{figure}[h!]
\center{\includegraphics[width=0.7\linewidth]{images/lucas_kanade_alg.pdf}}
\caption{Общий алгоритм работы}
\label{fig:lucas_kanade_alg}
\end{figure}
Основной алгоритм работы представлен на рисунке~\ref{fig:lucas_kanade_alg}. После старта программы, обрабатываемые изображения последовательно загружаются в память.
\begin{figure}[h!]
\center{\includegraphics[width=0.7\linewidth]{images/calc_pyr.pdf}}
\caption{Алгоритм вычисления уровня пирамиды}
\label{fig:calc_pyr}
\end{figure}
Если опция пирамидального алгоритма -- включена, то выполняется процедура вычисления уровня пирамиды, описанная на рисунке~\ref{fig:calc_pyr}. Затем создаются уменьшенные копии оригинальных изображений.
Как следует из (\ref{eq:alg_pyr}) на самом верхнем уровне пирамиды, базовым задаётся нулевой вектор. На всех последующих уровнях, базовый вектор, это вектор с предыдущего уровня пирамиды.
Соответственно для каждого слоя вычисляется оптический поток, в заданных точках. Алгоритм расчёта оптического потока представлен на рисунке~\ref{fig:calc_opt_flow}. 
После расчёта оптического потока, берётся векторное поле, соответствующее нижнему слою пирамиды, и на его основе для каждой точки высчитывается компоненты деформации:
\begin{enumerate}
\item продольной $\varepsilon_{xx}$;
\item поперечной $\varepsilon_{yy}$;
\item сдвиговой $\varepsilon_{xy}$;
\item поворотный компонент тензора дисторсии $\omega_z$;
\item интенсивность деформации сдвига $\gamma_i$.
\end{enumerate}

\begin{figure}[h!]
\center{\includegraphics[width=0.4\linewidth]{images/calc_opt_flow.pdf}}
\caption{Алгоритм вычисления оптического потока}
\label{fig:calc_opt_flow}
\end{figure}
%Основная проблема при вычислении оптического потока
\subsection {Интерфейс разрабатываемого программного обеспечения}
\subsubsection{Описание консольного интерфейса программы}% (выбор цветовой палитры экранных форм, расположение элементов управления на них, использование «горячих» клавиш  акселераторов, выпадающих меню и пр.)}
Интерфейс программы представлен в двух реализациях.
Первый — консольная программа в стиле классического Unix. Интерфейс командной строки более гибкий, позволяет выставить необходимые опции/флаги и запустить программу. Особенности в сравнении с графическим интерфейсом:
\begin{itemize}
\item интерфейс командной строки позволяет писать скрипты для автоматизации запуска и тестирования с различными входными параметрами, что средствами графического интерфейса гораздо сложнее;
\item большая функциональность;
\item некая сложность при использовании неопытным пользователям;
\item невозможность просмотра выходных результатов.
\end{itemize}

\begin{figure}[h!]
\center{\includegraphics[width=0.8\linewidth]{consol_screen}}
\caption{Пример консольного интерфейса в среде Linux}
\label{pic:con_scr}
\end{figure}

Перечень команд для запуска:
\begin{itemize}
\item l — список изображений для обработки;
\item o — директория для выходных результатов;
\item i — число уточнений при поиске смещённой части (по умолчанию равна 10);
\item w — радиус окна поиска (по умолчанию равна 24);
\item g — шаг между векторами оптического потока(по умолчанию равна 16);
\item p — применить метод пирамиды (по умолчанию опция включена);
\item v — показать версию программного обеспечения;
\item b — использование метода интерполяции (0 — Б-сплайн, 1 — Билинейная, 2 — Бикубическая), по умолчанию 0;
\item h — показать краткую справку;
\item d — генерировать подробный лог файл(по умолчанию опция выключена).
\end{itemize}
\subsubsection{Описание графического интерфейса программы}
Второй графический — более удобный для неопытного пользователя. Графический интерфейс ``Deformation Analysis'' приведён на рисунке~\ref{pic:gui_scr}, интерфейс модуля расчёта компонентов деформации твёрдого тела представлен на рисунке~\ref{pic:qml_screen}. 
\begin{figure}[h!]
\center{\includegraphics[width=0.95\linewidth]{gui_screen}}
\caption{Графический интерфейс ``Deformation Analysis''}
\label{pic:gui_scr}
\end{figure}
Главное окно приложения включает в себя:
\begin{enumerate}
\item окно просмотра документа;
\item список файлов в директории;
\item главное меню;
\item панели инструментов;
\item список файлов добавленных на обработку.
\end{enumerate}

Модуля расчёта компонентов деформации твёрдого тела:
\begin{figure}[h!]
\center{\includegraphics[width=0.5\linewidth]{qml_screen}}
\caption{Графический интерфейс разработанного модуля}
\label{pic:qml_screen}
\end{figure}
\begin{enumerate}
\item метод интерполяции;
\item число уточнений при поиске смещённой части (задаётся в диапазоне от 10 до 100);
\item радиус окна поиска (по умолчанию равна 16);
\item шаг между векторами оптического потока (по умолчанию равна 16);
\item директория для выходных результатов;
\item режим логов;
\item режим пирамиды;
\item выбор запускаемого программного модуля
\end{enumerate}